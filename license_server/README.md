# Лицензионный сервер Psylocyba Tools

Сервер работает с вашего ПК. Никаких облачных сервисов.

---

## Запуск на вашем компьютере

1. Дважды кликните **Запуск_сервера.bat** (или выполните `python server.py`)
2. Сервер запущен на порту 5000
3. Добавить ключ: `python add_key.py XXXX-XXXX-XXXX`
4. **Не закрывайте окно** — пока оно открыто, проверка лицензий работает

---

## Чтобы покупатели подключались к серверу с вашего ПК

Приложение у покупателя должно обращаться к вашему IP по интернету.

### Шаг 1: Узнайте свой внешний IP

Откройте в браузере: **https://2ip.ru** (или любой сайт «мой IP»)

Запомните адрес, например: `85.123.45.67`

### Шаг 2: Проброс порта на роутере

1. Откройте настройки роутера (обычно 192.168.0.1 или 192.168.1.1)
2. Найдите раздел «Проброс портов» / «Port Forwarding» / «Virtual Server»
3. Добавьте правило:
   - **Внешний порт:** 5000
   - **Внутренний IP:** IP вашего ПК в сети (узнать: `ipconfig` → IPv4)
   - **Внутренний порт:** 5000
   - **Протокол:** TCP

### Шаг 3: Разрешите в брандмауэре Windows

Панель управления → Брандмауэр → Дополнительные параметры → Правила для входящих → Создать правило → Порт → TCP 5000 → Разрешить.

### Шаг 4: Настройте приложение перед сборкой exe

В `app.py` укажите ваш IP:

```python
LICENSE_SERVER_URL = "http://85.123.45.67:5000"
```

Заменяйте на свой IP.

---

## Если IP меняется (динамический)

У большинства провайдеров внешний IP периодически меняется. Варианты:

- **Статический IP** у провайдера (платная опция)
- **Бесплатный DDNS** (No-IP, DuckDNS и др.) — выдаёт постоянный адрес вида `ваш-ник.no-ip.org`, который указывает на ваш текущий IP. Тогда в `app.py` будет что-то вроде:  
  `LICENSE_SERVER_URL = "http://psytools.no-ip.org:5000"`

---

## Добавление ключей

```
python add_key.py ABCD-EFGH-IJKL-MNOP
```

Или создайте `keys.json` вручную — см. формат в `add_key.py`.

---

## Важно

- ПК с сервером должен быть включён, когда покупатели запускают приложение
- Для работы проверки лицензий у покупателя должен быть доступ в интернет
